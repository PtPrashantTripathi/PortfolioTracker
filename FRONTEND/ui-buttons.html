<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legend 3 Lines Example</title>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: white;
        }
        #container {
            position: relative;
            width: 80%;
            height: 80%;
        }
        .legend {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
            font-family: Arial, sans-serif;
            font-size: 14px;
            color: black;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="legend" class="legend">
            <div id="symbol"></div>
            <div id="price"></div>
            <div id="date"></div>
        </div>
    </div>
    <script>
        // Create chart
        const chart = LightweightCharts.createChart(document.getElementById('container'), {
            crosshair: {
                horzLine: {
                    visible: false,
                },
                vertLine: {
                    color: '#FF0000',
                    width: 1,
                    style: 1,
                },
                labelBackgroundColor: '#FFF',
                labelBorderColor: '#000',
                labelBorderWidth: 1,
            },
        });

        // Create area series
        const areaSeries = chart.addAreaSeries({
            topColor: 'rgba(41, 98, 255, 0.5)',
            bottomColor: 'rgba(41, 98, 255, 0.1)',
            lineColor: '#2962FF',
            lineWidth: 2,
        });

        // Sample data
        const data = [
            { time: '2024-01-01', value: 30.0 },
            { time: '2024-01-02', value: 31.0 },
            { time: '2024-01-03', value: 30.5 },
            { time: '2024-01-04', value: 32.0 },
            { time: '2024-01-05', value: 33.0 },
            { time: '2024-01-06', value: 32.5 },
            { time: '2024-01-07', value: 33.5 },
            { time: '2024-01-08', value: 34.0 },
            { time: '2024-01-09', value: 34.5 },
            { time: '2024-01-10', value: 35.0 },
        ];

        // Set data to series
        areaSeries.setData(data.map(item => ({
            time: item.time,
            value: item.value,
        })));

        // Update legend based on crosshair movement
        chart.subscribeCrosshairMove(function (param) {
            if (!param.time) return;

            const point = param.time;
            const date = new Date(point * 1000).toLocaleDateString();
            const price = param.seriesData.get(areaSeries).value.toFixed(2);

            document.getElementById('symbol').innerText = `Symbol: SampleSymbol`;
            document.getElementById('price').innerText = `Price: $${price}`;
            document.getElementById('date').innerText = `Date: ${date}`;
        });
    </script>
</body>
</html>
